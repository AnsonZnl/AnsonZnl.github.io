(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{351:function(n,e,a){"use strict";a.r(e);var t=a(43),v=Object(t.a)({},(function(){var n=this,e=n.$createElement,a=n._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[a("hr"),n._v(" "),a("h2",{attrs:{id:"title-初试mongodb数据库date-2018-11-15-14-04-55tags-nodejs-mongodb"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#title-初试mongodb数据库date-2018-11-15-14-04-55tags-nodejs-mongodb"}},[n._v("#")]),n._v(' title: 初试MongoDB数据库\ndate: 2018-11-15 14:04:55\ntags: ["NodeJS","MongoDB"]')]),n._v(" "),a("h3",{attrs:{id:"数据库基本概念"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#数据库基本概念"}},[n._v("#")]),n._v(" 数据库基本概念")]),n._v(" "),a("p",[a("strong",[n._v("数据库（Database）基本概念：")])]),n._v(" "),a("ol",[a("li",[n._v("数据库就是按照一定的数据结构来组织，储存和管理数据的仓库")]),n._v(" "),a("li",[n._v("我们写的程序都是在内存中运行的，一旦程序运行结束或者计算机断点，程序运行中的数据就会全部丢失；所以我们就需要将一些程序的数据持久化到键盘之中，以确保数据的安全性。")]),n._v(" "),a("li",[n._v("数据库则是大批量数据持久化的普遍选择，1.文件 2. 数据库")])]),n._v(" "),a("p",[a("strong",[n._v("为什么都采用数据库来储存数据:")])]),n._v(" "),a("ul",[a("li",[n._v("数据库是有结构的")]),n._v(" "),a("li",[n._v("数据库可以提供各种接口，让数据处理（增删改查）快捷方便")]),n._v(" "),a("li",[n._v("各种语言（PHP jsp .net..）提供了完善的接口")])]),n._v(" "),a("p",[a("img",{attrs:{src:"https://upload-images.jianshu.io/upload_images/7072486-d9cbd052415afbf2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:"b6dde1cf95ae2a9ec8e68c0bf1719a3.png"}})]),n._v(" "),a("p",[n._v("###数据库分类")]),n._v(" "),a("ol",[a("li",[n._v("ROBMS（关系型数据库）：\n"),a("ul",[a("li",[n._v("比如MySql 、sql server Oracle 等")]),n._v(" "),a("li",[n._v("特点 通过一张张表来建立关联")]),n._v(" "),a("li",[n._v("基本都使用SQL语言来管理数据库，")])])]),n._v(" "),a("li",[n._v("Nosql (非关系型数据库)：\n"),a("ul",[a("li",[n._v("没有行 、列的概念 用json类储存数据")]),n._v(" "),a("li",[n._v("集合相当于“表”，文档相当于“行”")]),n._v(" "),a("li",[n._v("标准化和非标准化的摩擦。")]),n._v(" "),a("li",[n._v("标准化限制创新，非标准话不能统一")])])])]),n._v(" "),a("p",[a("strong",[n._v("特征")]),n._v("：\n使用键值（Key Value）储存数据；\nMongoDB的逻辑结构是一种层次结构，主要由：文档(document)、集合(collection)、数据库(database)这三部分组成的。")]),n._v(" "),a("ul",[a("li",[n._v("文档(document)：由键/值对构成，像{a:1}；{s:”abc”}等，它是MongoDB核心单元，MongoDB的文档（document），相当于关系数据库中的一行记录。")]),n._v(" "),a("li",[n._v("集合（Collection）：多个文档组成一个集合（collection），相当于关系数据库的表。")]),n._v(" "),a("li",[n._v("数据库（database）：多个集合（collection），逻辑上组织在一起，就是数据库（database）。\n一个MongoDB实例支持多个数据库（database）。")])]),n._v(" "),a("p",[a("strong",[n._v("关系型数据库和非关系型数据库区别：")]),n._v("\n关系型数据库比较结构化，操作不是很灵活，菲关系型数据库操作灵活，但不适合大型数据存储，比较适合微架构，两者是相辅相成的关系\n"),a("img",{attrs:{src:"https://upload-images.jianshu.io/upload_images/7072486-db349e8b6512241e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:"8bc32dd95a923344fdc2710d2fcbeab.png"}})]),n._v(" "),a("p",[a("strong",[n._v("非关系型数据库使用方面：")])]),n._v(" "),a("ol",[a("li",[n._v("数据模型比较简单")]),n._v(" "),a("li",[n._v("需要灵活性更强的后台系统")]),n._v(" "),a("li",[n._v("对数据库性能要求比较高")]),n._v(" "),a("li",[n._v("不需要高度的数据一致性")])]),n._v(" "),a("p",[a("strong",[n._v("非关系型数据库主要适合小微型架构的使用")])]),n._v(" "),a("h3",{attrs:{id:"数据库mongodb安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#数据库mongodb安装"}},[n._v("#")]),n._v(" 数据库MongoDB安装")]),n._v(" "),a("p",[n._v("MongoDB（非关系型数据库）：")]),n._v(" "),a("ol",[a("li",[n._v("适合快速开发web应用而设计的数据库系统")]),n._v(" "),a("li",[n._v("设计目标是极简、灵活、经常在web应用栈的业务层被运用")]),n._v(" "),a("li",[n._v("它的数据模型是面向文档的，类似于json的结构")]),n._v(" "),a("li",[n._v("所以这个数据库中是各种各样的json, 并以键值形式对存储")])]),n._v(" "),a("p",[n._v("安装：\n下载:https://www.mongodb.com/\n偶数是稳定版，奇数是开发版\n最好下载64位的系统版本的")]),n._v(" "),a("p",[a("strong",[n._v("配置环境变量:")])]),n._v(" "),a("ol",[a("li",[n._v("新建---\x3e安装到bin路径复制到环境变量")]),n._v(" "),a("li",[n._v("创建data->db文件夹")]),n._v(" "),a("li",[n._v("打开命令行输入mongod启动DB服务器")]),n._v(" "),a("li",[n._v("指定端口号和路径 mongod --dbpath d:\\data\\db")]),n._v(" "),a("li",[n._v("将MongDB设置为系统服务，data\\log\n创建配置文件在bin下穿件文件mongod.cfg\n执行一段命令：")])]),n._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('sc.exe create MongoDB binPath= "\\"F:\\MongoDB\\Server\\3.2\\bin\\mongod.exe\\" --service --config= \\"F:\\MongoDB\\Server\\3.2\\mongod.cfg\\"" DisplayName= "MongoDB" start= "auto"\n')])])]),a("p",[n._v("主要是让MongoDB一直运行在内存中\n参考资料：\nhttps://www.cnblogs.com/wzlblog/p/6364045.html\nhttps://www.cnblogs.com/chenlq/p/6515876.html")]),n._v(" "),a("h3",{attrs:{id:"在命令行中使用mongodb插入命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#在命令行中使用mongodb插入命令"}},[n._v("#")]),n._v(" 在命令行中使用MongoDB插入命令")]),n._v(" "),a("p",[a("strong",[n._v("MongoDB的组成：")])]),n._v(" "),a("ul",[a("li",[n._v("数据库 数据库是一个仓库 在仓库里可以放集合")]),n._v(" "),a("li",[n._v("集合： 集合类似数组 在集合里可以放文档")]),n._v(" "),a("li",[n._v("文档：文档是数据库中最小的单位 我们储存和操作的内容都是文档。")])]),n._v(" "),a("p",[a("strong",[n._v("基本指令：")]),n._v(" "),a("code",[n._v("show dbs")]),n._v("  显示当前所有的数据库\n"),a("code",[n._v("use")]),n._v(" 数据库名  进入到指定数据库\n"),a("code",[n._v("db")]),n._v(" 显示当前所在的数据库\n"),a("code",[n._v("show collections")]),n._v(" 显示数据库中的所有集合")]),n._v(" "),a("p",[n._v("使用管理员打开 cmd\n输入 "),a("code",[n._v("mongo")]),n._v("进入MongoDB的环境\n进入MongoDB的环境才能执行MongoDB的命令\n然后使用命令行进行CRUD(增删改查)：\n"),a("code",[n._v("db.<collection>.insert(doc)")])]),n._v(" "),a("p",[a("strong",[n._v("举例子：")]),n._v("\n想school数据库中的学生集合student中插入一个新的学生对象\n增加一条数据：\n"),a("code",[n._v('db.student.insert({id:"001",name:"znl",age:18,sex:“男”})')]),n._v("\n在当前的集合（school）中新建一条数据")]),n._v(" "),a("p",[n._v("查询一条数据：\n"),a("code",[n._v("db.<collection>.find();")])]),n._v(" "),a("p",[n._v("如："),a("code",[n._v("db.student.find();")]),n._v("\n回车 就能查询student下的所有数据\n插入多条数据：")]),n._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('db.集合名.insert([\n    {name:"张三",age:18,sex:"man"},\n    {name:"张三",age:18,sex:"man"},\n    {name:"张三",age:18,sex:"man"},\n    {id:18，name:"张三",age:18,sex:"man"}\n]);\n')])])]),a("blockquote",[a("p",[n._v("插入多条数据时把多条语句放在一个数组里\n插入可随便插入 不必拘泥于字段是否相同 当插入的字段不存在时会自动创建该字段")])]),n._v(" "),a("p",[n._v("查看更多更多操作：http://www.mongodb.org.cn/manual/")]),n._v(" "),a("h3",{attrs:{id:"mongodb-可视化工具-【nosql】"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mongodb-可视化工具-【nosql】"}},[n._v("#")]),n._v(" MongoDB 可视化工具 【NOSQL】")]),n._v(" "),a("p",[n._v("然而一直使用命令行操作是很麻烦的事情，所以推荐使用NOSQL可视化工具\n安装可视化工具下载地址：https://www.mongodbmanager.com/download")]),n._v(" "),a("h3",{attrs:{id:"使用可视化工具"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用可视化工具"}},[n._v("#")]),n._v(" 使用可视化工具")]),n._v(" "),a("p",[n._v("可视化工具 查找功能：\n插入(insert)语句：")]),n._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('db.student(集合名字).insert([\n{id:1,name:"znl",age:18},\n{id:1,name:"znl",age:18},\n]);\n')])])]),a("p",[n._v("查询语句：\n"),a("code",[n._v("db.student(集合name).find();")])]),n._v(" "),a("p",[n._v("设定条件查询：\n"),a("code",[n._v('db.student.find({ "_id" : ObjectId("5bd01c825f0d528d36a2c06f")});')]),n._v("\n查询id对应的数据\n"),a("code",[n._v('db.student.find({age:18,name:"张三"});')]),n._v("\n查询所有的age是18并且name是张三的人\n"),a("code",[n._v('db.student.findOne({age:18,name:"张三"});')]),n._v("\n查询单条符合条件的数据")]),n._v(" "),a("p",[n._v("操作符-查询有多少条数据：\n"),a("code",[n._v("db.student.find().count();")]),n._v("\n或\n"),a("code",[n._v("db.student.find().length();")]),n._v("\n返回数据总条数")]),n._v(" "),a("p",[n._v("查询符合条件数据的条数：\n"),a("code",[n._v('db.student.find({name:"张三"}).length();')]),n._v('\n返回符合name:"张三"的条数')]),n._v(" "),a("h3",{attrs:{id:"数据库更新命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#数据库更新命令"}},[n._v("#")]),n._v(" 数据库更新命令")]),n._v(" "),a("p",[n._v("更新原有的字段的数据：")]),n._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('db.student.update({"name":"张三"},{$set:{\n      name:"刘五",\n      age:45\n}});\n')])])]),a("p",[n._v("把匹配到的"),a("code",[n._v('name:"张三"')]),n._v("的数据都更新成 "),a("code",[n._v('name:"刘五", age:45')]),n._v("\n也可以新增没有的字段 直接写入就可以\n"),a("strong",[n._v("$set ：有这个字段就修改 没有这个字段就新增")])]),n._v(" "),a("p",[n._v("删除一个字段：")]),n._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('db.student.update({"name":"张三"}，{$unset:{\n    age:1\n}});\n')])])]),a("p",[n._v("查询"),a("code",[n._v("name:张三")]),n._v("的一条数据 然后删除它的age字段")]),n._v(" "),a("p",[n._v("修改多条：")]),n._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('db.student.updateMany({"sex":"man"},{$set:{\n    aihao:"玩游戏"\n}});\n')])])]),a("p",[n._v("把符合"),a("code",[n._v("sex:man")]),n._v("的语句都新增（修改）一条"),a("code",[n._v('aihao:"玩游戏"')]),n._v(" "),a("strong",[n._v("$set ：有则修改 无则新增")])]),n._v(" "),a("p",[n._v("更新多条数据方法2：")]),n._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('db.student.update({name:"张三"},{$set:{\n      name:"王五"\n}}, {\n     multi:true\n});\n')])])]),a("p",[n._v("参考文档：https://docs.mongodb.com/manual/tutorial/query-documents/")])])}),[],!1,null,null,null);e.default=v.exports}}]);