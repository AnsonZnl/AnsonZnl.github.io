(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{363:function(t,n,e){"use strict";e.r(n);var a=e(43),i=Object(a.a)({},(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h3",{attrs:{id:"php做的验证码"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#php做的验证码"}},[t._v("#")]),t._v(" php做的验证码")]),t._v(" "),e("h4",{attrs:{id:"php的gd函数"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#php的gd函数"}},[t._v("#")]),t._v(" php的GD函数")]),t._v(" "),e("p",[t._v("php的GD函数可以使文字字符串转换成图片输出在网页上，\n话不多说直接放码，")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('<?php\n$width=300;\n$height=80;\n$images=imagecreatetruecolor($width,$height);\n//创建一个画布\n$red=imagecolorallocate($images,255,0,0);\n$blue=imagecolorallocate($images,0,0,255);\n$white=imagecolorallocate($images,255,255,255);\n//创建颜色\nimagestring($images,5,70,30,"hello world",$red);\n//绘制字符\nheader("content-type:image/jpeg");\n//告诉浏览器怎么输出\nimagejpeg($images);\n//保存图像\nimagejpeg($images,"images/1.jpg");\n//输出图像\nimagedestroy($images);\n//销毁资源\n?>\n')])])]),e("p",[t._v("最后输出的是：\n"),e("img",{attrs:{src:"http://p0bnwspy9.bkt.clouddn.com/phpDG1.png",alt:""}})]),t._v(" "),e("h4",{attrs:{id:"为验证码增加识别难度（干扰元素）"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#为验证码增加识别难度（干扰元素）"}},[t._v("#")]),t._v(" 为验证码增加识别难度（干扰元素）")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v(" * 制作6位的数字+字母的验证码\n * */\n//创建宽高\n$width=200;\n$height=40;\n//新建画布\n$image=imagecreatetruecolor($width,$height);\n//新建矩形白色\n$white=imagecolorallocate($image,255,255,255);\n//填充一下\nimagefilledrectangle($image,0,0,$width,$height,$white);\n//封装颜色\nfunction getRandColor($image){\n//随机颜色\n    return imagecolorallocate($image,mt_rand(0,255),mt_rand(0,255),mt_rand(0,255));\n}\n\n//快速创建字符串 $string='asadf132' array_merge 合并成一个数组 join字符串链接数组中的值  赋给string\n$string=join('',array_merge(range(0,9),range('a','z'),range('A','Z')));\n//echo $string;\n//得到字体宽度\n$textWidth=imagefontwidth(28);\n//得到字体高度\n$textHeight=imagefontheight(28);\n$length=4;\n$strZ='';\nfor($i=0;$i<$length;$i++){\n    //随机每一位颜色\n//    $randColor=imagecolorallocate($image,mt_rand(0,255),mt_rand(0,255),mt_rand(0,255));\n    $randColor=getRandColor($image);\n    $size=mt_rand(15,22);\n    $angle=mt_rand(-15,15);\n//    $x=20+40*$i;\n//    $y=30;\n    $x=($width/$length)*$i+$textWidth;\n    $y=mt_rand($height/2,$height-$textHeight);\n    $fontFile='font/FZLTCXHJW.TTF';\n    //打乱string这个字符串 然后随机取第一个字符串[0]\n    $text=str_shuffle($string)[0];\n    $strZ=$strZ.$text;\n    imagettftext($image,$size,$angle,$x,$y,$randColor,$fontFile,$text);\n}\n//\nsession_start();\n$_SESSION[\"code\"]=$strZ;\n//添加干扰元素\n//添加点，像素做干扰元素\nfor($i=1;$i<=50;$i++){\n    //绘制像素\n    imagesetpixel($image,mt_rand(0,$width),mt_rand(0,$height),getRandColor($image));\n}\n//添加线段干扰\nfor($i=1;$i<=2;$i++){\n    //绘制线段\n    imageline($image,mt_rand(0,$width),mt_rand(0,$height),mt_rand(0,$width),mt_rand(0,$height),getRandColor($image));\n//                     起始位置          结束位置\n}\n//绘制圆弧干扰\nfor($i=1;$i<=1;$i++){\n    //绘制圆弧\n    imagearc($image,mt_rand(0,$width),mt_rand(0,$height),mt_rand(0,$width/2),mt_rand(0,$height/2),mt_rand(0,360),mt_rand(0,360),getRandColor($image));\n}\n\n\n//告诉浏览器以图像形式显示\nheader('content-type:image/png');\n//输出图像\nimagepng($image);\n//销毁资源\nimagedestroy($image);\n")])])]),e("p",[t._v("输出后如图：\n"),e("img",{attrs:{src:"http://p0bnwspy9.bkt.clouddn.com/phpDG2.png",alt:""}})]),t._v(" "),e("ul",[e("li",[t._v("绘制像素")]),t._v(" "),e("li",[t._v("imagesetpixel();")]),t._v(" "),e("li",[t._v("绘制线段")]),t._v(" "),e("li",[t._v("imageline()")]),t._v(" "),e("li",[t._v("绘制圆弧")]),t._v(" "),e("li",[t._v("imagearc()")]),t._v(" "),e("li",[t._v("取得字体宽度")]),t._v(" "),e("li",[t._v("imagefontwidth()")]),t._v(" "),e("li",[t._v("取得字体高度")]),t._v(" "),e("li",[t._v("imagefontheight()")])])])}),[],!1,null,null,null);n.default=i.exports}}]);