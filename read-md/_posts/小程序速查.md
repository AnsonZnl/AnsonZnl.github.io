---
title: 小程序速记[基础]
date: 2019-8-16 14:49:03
tags: ["微信小程序"]
---
# 小程序基础
## JSON

- project.config.json: 项目配置文件 app.json: 全局配置文件 page.json: 项目配置文件
- app.json 配置相对应页面的路由（全局配置），window窗口配置：，各页面配置：，tab标签配置
- 每个页面对应的page.json 也可以配置window 信息，如与app.json相同则覆盖app.json配置

## WXML

- 模板语法 在wxml 中使用双大括号，在双引号中使用有效。
- for 循环
 其中有两个值，item 代表每一项，index 代表当前项的索引，并且小程序推荐的使用wx:for 的元素上使用
  当页面发生改变重新渲染时，框架会效验key ，并重新排序，而非重新渲染，极大的提升了性能。
  ```
  wx:for = "{{ value }}" 
  wx:key =" {{ index }}"
  ```

- block 标签 用于一个渲染一个包含多节点的结构块，可以在
```
<block wx:for="{{arr or obj}}">
 <view>{{item}}</view>
</block>
```
里的内容会渲染，block不会被循环，
- wx: if & wx:elif & wx:else 表示显示隐藏元素，true渲染元素，false不渲染元素
- wx: hidden 接受一个布尔值，true隐藏，false显示，使用的是display 的black & none 控制
- data-*元素只能设置小写字母，就算设置成大写最后取值也是小写

## WXSS

- app.wxss:可写全局样式
- rpx: 小程序中的响应式单位，在iPhone6下，1px = 2rpx ，所以设计稿可以使用iPhone6作为标准设计
- import : 使用@import '../common.wxss' 可以导入其他样式表

## JS
- setData: 当改变data的值时，需要用到setData，[参考链接](https://blog.csdn.net/qq_42817227/article/details/84834210)

```
this.setData({
    count: this.data.count+1,//改变string & numbert
    'arr[0].name': '张宁乐',//改变数组
    'obj.name': '我已经改变'//改变对象
  })
```

- `bind`绑定事件会冒泡，`catch` 绑定的事件不会冒泡
- 当组件在元素上触发时，会向绑定的函数传递一个“事件对象”`event`，通过它可以获得该组件的相关的信息（比如自定义数据等）
- 使用`input`时需要绑定`bindinput `事件，向M层的同步数据。

# 小程序云开发（ServerLess）

云开发  三大基础能力支持
- 云函数：获取appid、获取openid 生成分享图、调用腾讯云sdk、数据库的操作
- 云数据库：对数据的增删改查
- 云存储： 管理文件 上传文件 下载文件 分享文件  可视化操作

## 云数据库

>NoSql 数据库，类似mongoDB，存储json格式数据
```
const db = wx.cloud.database();//获取数据库引用
const todos = db.collection('todos');//获取集合引用
```
**标识，最好是_id，{}为全部， 元素，操作的元素key:value，默认{} 为全部**
- 增`todos.add({data:{...}}).then(..).catch(..)`
- 删`todos.doc({.标识.}).remove({data{.元素.}}).then(. .).catch(..)`
- 改`todos.doc({.标识.}).updata({data{.元素.}}).then(..).catch(..)`
- 查`todos.doc({.标识.}).updata({data{.元素.}}).then(..).catch(..)`

  
## 云函数

> 类似Node.js 相当于后端

## 云储存

> 存储文件，视频 音频等

## Bug

小程序不支持 i++
在wxss中设置背景图片，图片的路径只能是https开头的网络图片
## 参考

- [小程序开发文档](https://developers.weixin.qq.com/miniprogram/dev/framework/)

- [慕课网小程序入门](https://developers.weixin.qq.com/miniprogram/dev/framework/)
